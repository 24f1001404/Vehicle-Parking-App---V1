{% extends 'admin_base.html' %}

{% block title %}
Admin Spot Details Page
{% endblock %}


{% block body %}

{% with messages = get_flashed_messages( with_categories = true ) %}
{% if messages %}
{% for category , message in messages %}
<div class = "alert alert-danger alert-dismissible fade show d-flex align-items-center mb-0 rounded-3 shadow-sm" role = "alert">
    <span style = "font-size: 1.5rem; margin-right: 0.5rem;">⚠️</span>
    <div>
        {{ message }}
    </div>
    <button type = "button" class = "btn-close" data-bs-dismiss = "alert" aria-label = "Close"></button>
</div>
{% endfor %}
{% endif %}
{% endwith %}

<div class = "container d-flex justify-content-center align-items-center min-vh-100 py-5">
    <div class = "col-12 col-md-8 col-lg-6">
        <div class = "card shadow-lg rounded-3 border border-light">
            <div class = "card-header bg-primary text-white text-center py-3 rounded-top-3">
                <h2 class = "mb-0 fw-bold">Spot Details</h2>
            </div>
            <div class = "card-body p-4">
                <ul class = "list-group list-group-flush">

                    <li class = "list-group-item d-flex justify-content-between align-items-center py-3">
                        <strong class = "fw-semibold text-dark">Parking Lot:</strong>
                        <span class = "text-muted">{{ lot_id }} {{parking_lot_name}}</span>
                    </li>

                    <li class = "list-group-item d-flex justify-content-between align-items-center py-3">
                        <strong class = "fw-semibold text-dark">Spot Number:</strong>
                        <span class = "text-muted">{{ number }}</span>
                    </li>

                    <li class = "list-group-item d-flex justify-content-between align-items-center py-3">
                        <strong class = "fw-semibold text-dark">Status:</strong>
                        <span>
                            {% if status  == "Available" %}
                                <span class = "badge bg-success rounded-pill py-2 px-3">Available</span>
                            {% else %}
                                <form action = "{{ url_for( 'main_routes.AdminOccupiedSpotDetails' ) }}" method = "post" class = "d-inline">
                                    <input type = "hidden" name = "lot_id" value = "{{ lot_id }}">
                                    <input type = "hidden" name = "spot_number" value = "{{ number }}">
                                    <button type = "submit" class = "btn btn-warning btn-sm rounded-pill shadow-sm">
                                        <i class = "bi bi-info-circle me-1"></i> {{ status }} ( View Details )
                                    </button>
                                </form>
                            {% endif %}
                        </span>
                    </li>

                </ul>
            </div>
            <div class = "card-footer text-center py-3 rounded-bottom-3 d-flex justify-content-center gap-3">
                <form action = "{{ url_for( 'main_routes.DeleteSpot' ) }}" method = "POST"
                    onsubmit = "return confirm( 'Are you sure you want to delete spot {{ number }} from {{ lot_id }}? This action cannot be undone.' );">
                    <input type = "hidden" name = "lot_id" value = "{{ lot_id }}">
                    <input type = "hidden" name = "spot_number" value = "{{ number }}">
                    <input type = "hidden" name = "status" value = "{{ status }}">
                    <button class = "btn btn-danger btn-lg rounded-pill shadow-sm" type = "submit">
                        <i class = "bi bi-trash me-2"></i> Delete Spot
                    </button>
                </form>

                <a href = "{{ url_for( 'main_routes.AdminHomePage' ) }}" class = "btn btn-outline-secondary btn-lg rounded-pill shadow-sm">
                    <i class = "bi bi-x-circle me-2"></i> Close
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}
