{% extends 'admin_base.html' %}

{% block title %}Admin Edit Profile Page{% endblock %}


{% block body %}

{% with messages = get_flashed_messages( with_categories = true ) %}
{% if messages %}
<div class = "container mt-3">
    {% for category , message in messages %}
    <div class = "alert alert-danger alert-dismissible fade show d-flex align-items-center mb-3 rounded-3 shadow-sm" role = "alert">
        <span class = "fs-4 me-2">⚠️</span>
        <div>
            {{ message }}
        </div>
        <button type = "button" class = "btn-close" data-bs-dismiss = "alert" aria-label = "Close"></button>
    </div>
    {% endfor %}
</div>
{% endif %}
{% endwith %}

<div class = "container d-flex justify-content-center align-items-center min-vh-100 py-5">
    <div class = "col-12 col-md-8 col-lg-7"> 
        <div class = "card shadow-lg rounded-3 border border-light">
            <div class = "card-header bg-warning text-white text-center py-3 rounded-top-3">
                <h2 class = "mb-0 fw-bold">Edit Admin Profile</h2>
            </div>
            <div class = "card-body p-4">
                <form method = "POST" action = "{{ url_for( 'main_routes.AdminEditPage' ) }}">
                    <div class = "mb-3">
                        <label for = "name" class = "form-label fw-semibold text-dark">Name</label>
                        <input type = "text" class = "form-control rounded-3" name = "name" value = "{{ user.name }}" required>
                    </div>

                    <div class = "mb-3">
                        <label for = "email" class = "form-label fw-semibold text-dark">Email</label>
                        <input type = "email" class = "form-control rounded-3" name = "email" value = "{{ user.email }}" required>
                    </div>

                    <div class = "mb-3">
                        <label for = "gender" class = "form-label fw-semibold text-dark">Gender</label>
                        <select class = "form-select rounded-3" name = "gender">
                            <option value = "Male" {% if user.gender  == 'Male' %}selected{% endif %}>Male</option>
                            <option value = "Female" {% if user.gender  == 'Female' %}selected{% endif %}>Female</option>
                            <option value = "Other" {% if user.gender  == 'Other' %}selected{% endif %}>Other</option>
                        </select>
                    </div>

                    <div class = "mb-3">
                        <label for = "dob" class = "form-label fw-semibold text-dark">Date of Birth</label>
                        <input type = "date" class = "form-control rounded-3" name = "DOB" value = "{{ user.DOB }}">
                    </div>

                    <div class = "mb-3">
                        <label for = "new_password" class = "form-label fw-semibold text-dark">Enter new password ( if you want to change )</label>
                        <input type = "password" class = "form-control rounded-3" name = "new_password">
                    </div>

                    <div class = "mb-3">
                        <label for = "conform_password" class = "form-label fw-semibold text-dark">Confirm new password ( if you want to change )</label>
                        <input type = "password" class = "form-control rounded-3" name = "conform_password">
                    </div>

                    <div class = "mb-4">
                        <label for = "password" class = "form-label fw-semibold text-dark">Enter old password ( required to save changes )</label>
                        <input type = "password" class = "form-control rounded-3" name = "password" required>
                    </div>

                    <div class = "d-flex justify-content-center gap-3">
                        <button type = "submit" class = "btn btn-success btn-lg rounded-pill shadow-sm">
                            <i class = "bi bi-save me-2"></i> Save Changes
                        </button>
                        <a href = "{{ url_for( 'main_routes.AdminHomePage' ) }}" class = "btn btn-outline-secondary btn-lg rounded-pill shadow-sm">
                            <i class = "bi bi-x-circle me-2"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}
